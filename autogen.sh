#!/bin/bash

test "X`echo -e`" = "X-e" && (
	if `which bash`; then
		echo "Your builtin echo doesn't support -e, running with bash instead."
		bash $0
		exit
	else
		echo "Your builtin echo (or echo(1)) doesn't support -e."
		echo "If you had bash I'd use that instead, but it seems you don't."
		exit 1
	fi
)

# Generate file list for automation subdir
rm -f automation/Makefile.am
cat > automation/Makefile.am <<EOF
## This file is automatically generated.
## Please edit autogen.sh if you need to modify this file.

automationdir = \$(datarootdir)/aegisub/automation
dist_automation_DATA = \\
EOF

find automation/ -name '*.lua' -or -name '*.rb' -or -name '*.auto3' -or -name '*.txt' | sed '{s/^automation\//\t/; s/$/ \\/}' >> automation/Makefile.am
echo -e "\tdemos/raytracer-test1.ass \\" >> automation/Makefile.am
echo -e "\tv4-docs/template-scripting-ideas.ass\n\n" >> automation/Makefile.am

autoreconf -f -i -s

